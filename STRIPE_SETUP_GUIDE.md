# Stripe完全セットアップガイド（個人事業主向け）

**作成日**: 2026年02月01日
**対象**: 個人事業主・フリーランス
**所要時間**: 30分

---

## 📋 目次

1. Stripeアカウント作成
2. 事業者情報の登録
3. 銀行口座の設定
4. API キーの取得
5. Netlify環境変数設定
6. テスト決済

---

## ✅ 準備するもの

### 必須書類

- [ ] 本人確認書類（以下のいずれか1つ）
  - 運転免許証
  - マイナンバーカード
  - パスポート
  - 在留カード

- [ ] 銀行口座情報
  - 銀行名
  - 支店名
  - 口座番号
  - 口座名義（カタカナ）

### 事業情報

- [ ] 屋号（個人事業主の場合）
- [ ] 事業内容の説明
- [ ] Webサイト URL
- [ ] 事業所住所

---

## 1️⃣ Stripeアカウント作成（5分）

### 1-1. Stripe公式サイトにアクセス

1. **URLを開く**: https://stripe.com/jp
2. 右上の **「ログイン」** または **「今すぐ始める」** をクリック

### 1-2. アカウント作成

1. **メールアドレス** を入力
2. **氏名** を入力（本名）
3. **パスワード** を設定（8文字以上推奨）
4. **国/地域**: 日本 を選択
5. **「アカウントを作成」** をクリック

### 1-3. メール認証

1. 登録したメールアドレスに確認メールが届く
2. メール内の **「メールアドレスを確認」** リンクをクリック

✅ **完了確認**: Stripe DashboardにログインできたらStep 1完了

---

## 2️⃣ 事業者情報の登録（10分）

### 2-1. ビジネスタイプの選択

1. Stripe Dashboard にログイン
2. 左メニュー **「設定」** → **「アカウント詳細」** をクリック
3. **ビジネスタイプ**: 「個人事業主」 を選択

### 2-2. 事業者情報入力

#### 基本情報

```
ビジネスタイプ: 個人事業主
屋号: NOVE Systems（例）
事業内容: ソフトウェア開発・販売
商品やサービス: Linuxサーバー性能最適化システム
WebサイトURL: https://stately-pithivier-2facbf.netlify.app/
```

#### 所在地情報

```
国: 日本
郵便番号: XXX-XXXX
都道府県: XX県
市区町村: XX市
番地・建物名: XXX
```

#### 連絡先情報

```
電話番号: 090-XXXX-XXXX（携帯電話でOK）
メールアドレス: （既に登録済み）
```

### 2-3. 代表者情報入力

```
氏名（漢字）: 川口 清也（例）
氏名（カナ）: カワグチ セイヤ（例）
生年月日: YYYY/MM/DD
性別: 男性/女性
```

### 2-4. 本人確認書類のアップロード

1. **書類の種類** を選択（運転免許証推奨）
2. **表面** の写真をアップロード
   - スマホで撮影OK
   - 四隅がはっきり見えるように
3. **裏面** の写真をアップロード
4. **「送信」** をクリック

✅ **完了確認**: 「本人確認書類を受領しました」メッセージが表示される

---

## 3️⃣ 銀行口座の設定（5分）

### 3-1. 銀行口座情報入力

1. 左メニュー **「設定」** → **「入出金」** をクリック
2. **「銀行口座を追加」** をクリック

### 3-2. 口座情報入力

```
銀行名: 例）三菱UFJ銀行
支店名: 例）渋谷支店
口座種別: 普通預金
口座番号: 1234567
口座名義（カナ）: カワグチ セイヤ（例）
```

### 3-3. 確認

1. 入力内容を確認
2. **「保存」** をクリック

✅ **完了確認**: 銀行口座が一覧に表示される

---

## 4️⃣ API キーの取得（2分）⭐重要

### 4-1. API キーページにアクセス

1. 左メニュー **「開発者」** → **「API キー」** をクリック

### 4-2. キーをコピー

#### テスト環境用（Sandbox）

```
公開可能キー（Publishable key）:
pk_test_XXXXXXXXXXXXXXXXXXXX

シークレットキー（Secret key）:
sk_test_XXXXXXXXXXXXXXXXXXXX
```

1. **シークレットキー** の「表示」をクリック
2. 表示されたキーを **コピー** してメモ帳に保存

⚠️ **重要**: シークレットキーは絶対に他人に見せない

#### 本番環境用（Live）

```
公開可能キー（Publishable key）:
pk_live_XXXXXXXXXXXXXXXXXXXX

シークレットキー（Secret key）:
sk_live_XXXXXXXXXXXXXXXXXXXX
```

- 審査完了後に取得可能
- 最初はテスト環境用のみでOK

✅ **完了確認**: テスト環境のシークレットキーをコピーしたらStep 4完了

---

## 5️⃣ Netlify環境変数設定（5分）

### 5-1. Netlify Dashboardにアクセス

1. ブラウザで開く: https://app.netlify.com/
2. サイト **「stately-pithivier-2facbf」** を選択
3. **「Site settings」** → **「Environment variables」** をクリック

### 5-2. Stripe環境変数を追加

#### 変数1: STRIPE_SECRET_KEY（テスト環境）

```
Key:
STRIPE_SECRET_KEY

Value:
sk_test_XXXXXXXXXXXXXXXXXXXX
（Step 4でコピーしたシークレットキー）

Scopes:
☑ All scopes
```

「Add variable」をクリック

---

#### 変数2: STRIPE_PUBLISHABLE_KEY（将来用・オプション）

```
Key:
STRIPE_PUBLISHABLE_KEY

Value:
pk_test_XXXXXXXXXXXXXXXXXXXX
（Step 4でコピーした公開可能キー）

Scopes:
☑ All scopes
```

「Add variable」をクリック

---

✅ **完了確認**: 環境変数が追加されたことを確認

---

## 6️⃣ 再デプロイ＆テスト（10分）

### 6-1. Gitにコミット・プッシュ

```bash
cd /home/seiya/Projects/nove-infinity-project/website

# 変更を確認
git status

# ステージング
git add package.json netlify/functions/create-stripe-checkout.js pricing.html STRIPE_SETUP_GUIDE.md

# コミット
git commit -m "✅ Add Stripe integration - PayPal + Stripe dual payment"

# プッシュ
git push origin main
```

### 6-2. デプロイ完了を待つ（3-5分）

1. Netlify Dashboard → Deploys
2. ステータスが「Building」→「Published」になるまで待つ
3. Functions タブで確認:
   ```
   ✓ create-paypal-order
   ✓ capture-paypal-order
   ✓ create-stripe-checkout
   ```

### 6-3. テスト決済（Stripe）

1. **Webサイトにアクセス**:
   https://stately-pithivier-2facbf.netlify.app/pricing.html

2. **「スタートアップ」プランの「💳 クレジットカード決済（Stripe）」ボタンをクリック**

3. **Stripe Checkoutページが表示される**

4. **テストカード情報を入力**:
   ```
   カード番号: 4242 4242 4242 4242
   有効期限: 12/34（任意の未来日）
   CVC: 123（任意の3桁）
   名前: Test User
   ```

5. **「支払う」ボタンをクリック**

6. **成功ページにリダイレクト**:
   ```
   pricing.html?success=true&plan=startup&session_id=...
   ```

✅ **完了確認**: 決済成功ページが表示されたらテスト完了

---

## 7️⃣ 審査完了後の本番環境切り替え

### 審査期間

- **通常**: 1-3営業日
- **最短**: 即日（午前中に申請）

### 審査完了後の手順

1. **本番環境APIキー取得**
   - Stripe Dashboard → 開発者 → API キー
   - 「本番環境データを表示」をクリック
   - シークレットキー（sk_live_...）をコピー

2. **Netlify環境変数を更新**
   - STRIPE_SECRET_KEY の値を本番環境キーに変更
   - `sk_test_...` → `sk_live_...`

3. **再デプロイ**
   ```bash
   git commit --allow-empty -m "Switch to Stripe Live environment"
   git push origin main
   ```

4. **本番環境でテスト**
   - 少額（¥100など）で実際に決済テスト
   - ⚠️ 本番環境では実際のお金が動きます

---

## 📊 手数料・入金サイクル

### 決済手数料

```
クレジットカード決済: 3.6%
返金手数料: 無料
```

### 入金サイクル

```
初回入金: 審査完了後7営業日
2回目以降: 毎週金曜日（自動）
最低振込額: なし（¥1から可能）
振込手数料: 無料
```

---

## ❓ よくある質問

### Q1: 個人事業主でも利用できますか？

**A**: はい、個人事業主でも利用可能です。開業届を提出していなくても、本人確認書類があれば登録できます。

### Q2: 審査はどのくらいかかりますか？

**A**: 通常1-3営業日、最短で即日完了します。

### Q3: テスト環境でどのくらい試せますか？

**A**: 無制限にテスト決済できます。実際のお金は動きません。

### Q4: PayPalと併用できますか？

**A**: はい、今回の実装でPayPalとStripe両方に対応しています。顧客が好きな方を選べます。

### Q5: 本番環境に切り替えるタイミングは？

**A**: 審査完了後、すぐに切り替え可能です。ただし、十分なテストを行ってから切り替えることを推奨します。

---

## 🛡️ セキュリティ対策

### 必須対策

1. **シークレットキーの保護**
   - GitHubにコミットしない
   - Netlify環境変数のみで管理

2. **HTTPS必須**
   - Netlifyは自動的にHTTPS有効化

3. **Webhook署名検証**
   - Stripeからの通知を検証

---

## 📞 サポート

### Stripe公式サポート

- **ドキュメント**: https://stripe.com/docs
- **サポートチャット**: Stripe Dashboard右下のチャットアイコン
- **メールサポート**: support@stripe.com
- **電話サポート**: 03-4405-5537（平日10:00-18:00）

---

## ✅ 完了チェックリスト

### 初期セットアップ

- [ ] Stripeアカウント作成
- [ ] 事業者情報登録
- [ ] 本人確認書類アップロード
- [ ] 銀行口座登録
- [ ] API キー取得（テスト環境）
- [ ] Netlify環境変数設定
- [ ] Gitプッシュ
- [ ] Netlifyデプロイ確認

### テスト

- [ ] Stripe Checkoutページ表示確認
- [ ] テストカードで決済成功
- [ ] 成功ページへリダイレクト確認
- [ ] PayPalとの併用動作確認

### 本番環境（審査完了後）

- [ ] 審査完了確認
- [ ] 本番環境APIキー取得
- [ ] Netlify環境変数を本番キーに更新
- [ ] 本番環境でテスト決済
- [ ] 運用開始

---

**作成者**: 清也 (Seiya)
**最終更新**: 2026年02月01日
**バージョン**: 1.0.0
